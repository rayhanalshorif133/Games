<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link href="./src/output.css" rel="stylesheet">
  <title>Target Ball Game</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css" />
  <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
</head>

<body>
  <div class="flex items-center justify-center min-h-screen">

    <script>
      $(document).ready(function () {
        $(document).mousemove(function (event) {
          $("#pageX").html(event.pageX);
          $("#pageY").html(event.pageY);
        });
      });
    </script>
    <div id="game-box-container">
      <div id="game-box">
        <div class="absolute flex top-0 left-3">
          <div class="bouncing_y_border game_border" id="top_1" data-top="-513px" data-left="-141px"></div>
          <div class="bouncing_y_border game_border" id="top_2" data-top="-513px" data-left="-103px"></div>
          <div class="bouncing_y_border game_border" id="top_3" data-top="-513px" data-left="-63px"></div>
          <div class="bouncing_y_border game_border" id="top_4" data-top="-513px" data-left="-23px"></div>
          <div class="bouncing_y_border game_border" id="top_5" data-top="-513px" data-left="17px"></div>
          <div class="bouncing_y_border game_border" id="top_6" data-top="-513px" data-left="57px"></div>
          <div class="bouncing_y_border game_border" id="top_7" data-top="-513px" data-left="97px"></div>
          <div class="bouncing_y_border game_border" id="top_8" data-top="-513px" data-left="137px"></div>
        </div>
        <div class="absolute right-0">
          <div class="bouncing_x_border game_border" id="right_1" data-top="-513" data-left="145px"></div>
          <div class="bouncing_x_border game_border" id="right_2" data-top="-480" data-left="145px"></div>
          <div class="bouncing_x_border game_border" id="right_3" data-top="-441" data-left="145px"></div>
          <div class="bouncing_x_border game_border" id="right_4" data-top="-401" data-left="145px"></div>
          <div class="bouncing_x_border game_border" id="right_5" data-top="-360" data-left="145px"></div>
          <div class="bouncing_x_border game_border" id="right_6" data-top="-320" data-left="145px"></div>
          <div class="bouncing_x_border game_border" id="right_7" data-top="-280" data-left="145px"></div>
          <div class="bouncing_x_border game_border" id="right_8" data-top="-240" data-left="145px"></div>
          <div class="bouncing_x_border game_border" id="right_9" data-sent_id="left_5" data-top="-200"
            data-left="145px"></div>
          <div class="bouncing_x_border game_border" id="right_10" data-top="-160" data-left="145px"></div>
          <div class="bouncing_x_border game_border" id="right_11" data-top="-120" data-left="145px"></div>
          <div class="bouncing_x_border game_border" id="right_12" data-top="-80" data-left="145px"></div>
          <div class="bouncing_x_border game_border" id="right_13" data-top="-40" data-left="145px"></div>
          <div class="bouncing_x_border game_border" id="right_14" data-top="0" data-left="145px"></div>
        </div>
        <div class="absolute left-0">
          <div class="bouncing_x_border game_border" id="left_1" data-top="-513" data-left="-147px"></div>
          <div class="bouncing_x_border game_border" id="left_2" data-top="-480" data-left="-147px"></div>
          <div class="bouncing_x_border game_border" id="left_3" data-top="-441" data-left="-147px"></div>
          <div class="bouncing_x_border game_border" id="left_4" data-top="-401" data-left="-147px"></div>
          <div class="bouncing_x_border game_border" id="left_5" data-sent_id="right_2" data-top="-360" data-left="-147px"></div>
          <div class="bouncing_x_border game_border" id="left_6" data-top="-320" data-left="-147px"></div>
          <div class="bouncing_x_border game_border" id="left_7" data-top="-280" data-left="-147px"></div>
          <div class="bouncing_x_border game_border" id="left_8" data-top="-240" data-left="-147px"></div>
          <div class="bouncing_x_border game_border" id="left_9" data-top="-200" data-left="-147px"></div>
          <div class="bouncing_x_border game_border" id="left_10" data-top="-160" data-left="-147px"></div>
          <div class="bouncing_x_border game_border" id="left_11" data-top="-120" data-left="-147px"></div>
          <div class="bouncing_x_border game_border" id="left_12" data-top="-80" data-left="-147px"></div>
          <div class="bouncing_x_border game_border" id="left_13" data-sent_id="right_9" data-top="-40"
            data-left="-147px"></div>
            
            
          <div class="bouncing_x_border game_border" id="left_14" data-top="0" data-left="-147px"></div>
        </div>
      </div>
      <!-- <div id="player"></div> -->
      <div id="player" class="active">
        <div id="active_ball">
          <div class="target"></div>
        </div>
      </div>
    </div>
  </div>

  <script>
    $(() => {

      $("#player").click(function () {
        // $("#player").toggleClass("active");
        // if ($("#player").hasClass("active")) {
        //   const activeBall = `<div id="active_ball"><div class="target"></div></div>`;
        //   $(this).html(activeBall);
        //   $('#game-box').addClass('cursor-pointer');
        // } else {
        //   $(this).html('');
        //   $('#game-box').removeClass('cursor-pointer');
        // }
      });



      cursorDetector();

      setInterval(function () {
        // bounceRandomly(200, 0);
      }, 1000);


    });


    const cursorDetector = () => {
      $('.game_border').click(function (event) {
        var top = $(this).data('top');
        var left = $(this).data('left');
        var send_id = "#" + $(this).data('sent_id');
        $("#active_ball").animate({
          top: top,
          left: left
        }, 1000);
        sentToOther(send_id);
      });


      $('body').mousemove(function (event) {
        var x = event.pageX - 216;
        var y = event.pageY - 194;
        // console.log(x, y);
      });
    };


    const sentToOther = (send_id) => {
      setTimeout(function () {
        var top = $(send_id).data('top');
        var left = $(send_id).data('left');
        var GET_SEND_ID = $(send_id).data('sent_id');
        if(GET_SEND_ID){
          sentToOther(GET_SEND_ID);        
        }

        $("#active_ball").animate({
          top: top,
          left: left
        }, 1000);
      }, 1100);
    };


    function bounceRandomly(randomX, randomY) {
      // Animate the element to the random position
      $('.bouncing_ball').animate({
        left: randomX + 'px',
        top: randomY + 'px'
      }, 1000);
    }
  </script>
</body>

</html>