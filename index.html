<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Shooter Game</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css" />
  <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>

  <link rel="stylesheet" href="./src/output.css">
</head>

<body class="bg-gray-200 flex items-center justify-center min-h-screen">
  <div
    class="h-[28rem] relative w-80 border-4 border-double border-gray-800 overflow-hidden flex items-center justify-center">
    <div class="enemy">
      <div class="flex">
        <div class="bg-gray-700 h-4 w-4 absolute -top-4 left-4 mouth"></div>
        <div class="bg-gray-700 h-4 w-4"></div>
        <div class="bg-gray-700 h-4 w-4"></div>
        <div class="bg-gray-700 h-4 w-4"></div>
      </div>
      <div class="flex">
        <div class="bg-gray-700 h-4 w-4"></div>
        <div class="bg-transparent h-4 w-4"></div>
        <div class="bg-gray-700 h-4 w-4"></div>
      </div>
    </div>

    <div class="enemy">
      <div class="flex">
        <div class="bg-gray-700 h-4 w-4 absolute -top-4 left-4 mouth"></div>
        <div class="bg-gray-700 h-4 w-4"></div>
        <div class="bg-gray-700 h-4 w-4"></div>
        <div class="bg-gray-700 h-4 w-4"></div>
      </div>
      <div class="flex">
        <div class="bg-gray-700 h-4 w-4"></div>
        <div class="bg-transparent h-4 w-4"></div>
        <div class="bg-gray-700 h-4 w-4"></div>
      </div>
    </div>

    <div class="player" id="player">
      <div class="flex">
        <div class="bg-transparent h-4 w-4"></div>
        <div class="bg-gray-700 h-4 w-4"></div>
        <div class="bg-transparent h-4 w-4"></div>
      </div>
      <div class="flex">
        <div class="bg-gray-700 h-4 w-4"></div>
        <div class="bg-gray-700 h-4 w-4"></div>
        <div class="bg-gray-700 h-4 w-4"></div>
      </div>
      <div class="flex">
        <div class="bg-gray-700 h-4 w-4"></div>
        <div class="bg-gray-700 h-4 w-4"></div>
        <div class="bg-gray-700 h-4 w-4"></div>
      </div>
    </div>


  </div>


  <script>
    $(document).ready(function () {
      const randomTop = ['top-10', 'top-20', 'top-30', 'top-40', 'top-50', '-top-10', '-top-20', '-top-30', '-top-40', '-top-50'];
      const randomRotated = ['rotate-90', 'rotate-180', '-rotate-90', '-rotate-180'];


      $(".enemy").each(function (item, content) {
        const randomNumber = Math.floor(Math.random() * randomTop.length);
        $(content).addClass(randomTop[randomNumber]);
      });

      setInterval(() => {
        // randomRotated
        // const randomNumber = Math.floor(Math.random() * randomRotated.length);
        // $(".enemy").addClass(randomRotated[randomNumber]);

        $(".mouth").before('<div class="fire"></div>');
        setTimeout(() => {
          $(".fire").addClass('-translate-y-96');
        }, 2000);

        setTimeout(() => {
          $(".fire").remove();
        }, 13000);


      }, 2000);

      handlePlayerMove();
    });


    const handlePlayerMove = () => {
      document.addEventListener('keydown', (event) => {

        if (event.key == ' ') {
          console.log('fire');
        }

        if (event.key === 'ArrowUp') {
          if ($("#player").hasClass('rotate-0')) {
            $("#player").css('left', '1rem');
          } else {
            $("#player").removeClass().addClass('player');
            $("#player").addClass('rotate-0');
          }
        }

        if (event.key === 'ArrowDown') {
          if ($("#player").hasClass('rotate-180')) {

            const classLists = $("#player").attr('class').split('top-');

            if(classLists[1]){
              const top = 'top-' + (parseInt(classLists[1]) + 1);
              if(top == 'top-13'){
                top = 'top-12';
              }
              $("#player").removeClass().addClass(classLists[0]).addClass(top);
            }else{
              $("#player").addClass('top-1');
            }

            
          } else {
            $("#player").removeClass().addClass('player');
            $("#player").addClass('rotate-180');
          }
        }

        if (event.key === 'ArrowRight') {
          if ($("#player").hasClass('rotate-90')) {
            $("#player").css('left', '1rem');
          } else {
            $("#player").removeClass().addClass('player');
            $("#player").addClass('rotate-90');
          }
        }

        if (event.key === 'ArrowLeft') {
          if ($("#player").hasClass('-rotate-90')) {
            $("#player").css('right', '1rem');
          } else {
            $("#player").removeClass().addClass('player');
            $("#player").addClass('-rotate-90');
          }
        }
      });
    };
  </script>

</body>

</html>